import{B as M,C as O,D as R,E as p,F as V,G as j,H as T,J as u,L as D,M as G,N as q,O as U,Q as z,R as B,a as x,b as v,c as l,d as f,e as c,f as L,g as w,h as S,i as t,j as e,k as a,l as g,n as i,o as y,p as C,q as k,r as _,s as E,t as F,v as N,x as P,y as A,z as I}from"./chunk-6OMENQ4S.js";var $=d=>["/edit",d];function J(d,s){if(d&1&&(t(0,"a",30)(1,"div",31)(2,"strong",32),i(3),e(),t(4,"small"),a(5,"i",33),i(6),e()(),t(7,"div",34),i(8),e(),a(9,"img",35),e()),d&2){let h=s.$implicit;c("routerLink",E(5,$,h.id)),l(3),y(h.name),l(3),y(h.city),l(2),C("Price: ",h.price,"/m"),l(),c("src",h.photo,v)}}var K=()=>["/add"],re=(()=>{let s=class s{constructor(m,r,n){this.route=m,this.router=r,this.housing=n,this.editForm=new T({name:new u("",p.required),city:new u("",p.required),photo:new u("",p.required),price:new u("",[p.required,p.min(1)]),wifi:new u(""),laundry:new u("")}),this.listings=this.housing.getListings(),this.route.params.subscribe(o=>{let b=Number(o.id);this.editListing=this.housing.getListingById(b),this.editForm.patchValue({id:this.editListing?.id,name:this.editListing?.name,city:this.editListing?.city,photo:this.editListing?.photo,price:this.editListing?.price,wifi:this.editListing?.wifi,laundry:this.editListing?.laundry})})}ngOnInit(){}updateImagePreview(){let m=this.editForm.get("photo");m&&m.updateValueAndValidity()}onSubmit(){if(this.editForm.valid){let m=Number(this.route.snapshot.params.id),r=this.editForm.value.name,n=this.editForm.value.city,o=this.editForm.value.photo,b=this.editForm.value.price,H=this.editForm.value.wifi,W=this.editForm.value.laundry;this.housing.updateListing(m,r,n,o,b,H,W),this.router.navigate(["/edit"])}}deleteListing(){if(window.confirm("Are you sure you want to delete this listing?")){let r=Number(this.route.snapshot.params.id);this.housing.deleteListing(r),this.router.navigate(["/edit"])}}};s.\u0275fac=function(r){return new(r||s)(f(N),f(P),f(B))},s.\u0275cmp=x({type:s,selectors:[["app-edit-listing"]],standalone:!0,features:[k],decls:50,vars:5,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","col-lg-4","col-md-4",2,"padding","0"],[1,"d-flex","flex-column","align-items-stretch","flex-shrink-0","bg-body-tertiary",2,"max-width","380px"],[1,"d-flex","align-items-center","justify-content-between","flex-shrink-0","p-3","link-body-emphasis","text-decoration-none","border-bottom"],[1,"fs-5","fw-semibold"],[3,"routerLink"],[1,"btn"],[1,"bi","bi-plus-lg",2,"margin-right","8px"],[1,"list-group","list-group-flush","border-bottom","scrollarea",2,"max-height","100vh","overflow","scroll"],[1,"col-8","col-md-6","mt-2",2,"padding","0","margin-left","32px"],[1,"mb-4",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name","placeholder","Apartment",1,"form-control"],["for","city",1,"form-label"],["type","text","id","city","formControlName","city","placeholder","Athens",1,"form-control"],["for","photo",1,"form-label"],["type","text","id","photo","formControlName","photo","placeholder","Photo",1,"form-control",3,"change"],["alt","Image Preview","width","300px","height","200px",1,"img-fluid",2,"border-radius","4px",3,"src"],["for","price",1,"form-label"],["type","number","id","price","formControlName","price","placeholder","100",1,"form-control"],[1,"form-check"],["type","checkbox","id","wifi","formControlName","wifi",1,"form-check-input"],["for","wifi",1,"form-check-label"],["type","checkbox","id","laundry","formControlName","laundry",1,"form-check-input"],["for","laundry",1,"form-check-label"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],["type","submit",1,"btn","btn-save",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],["routerLinkActive","custom-active","aria-current","true",1,"list-group-item","list-group-item-action","py-3","lh-sm",3,"routerLink"],[1,"d-flex","w-100","align-items-center","justify-content-between"],[1,"mb-1"],[1,"bi","bi-geo-alt-fill"],[1,"col-10","mb-1","small"],["alt","listing.name","width","100px","height","50px",2,"border-radius","4px","object-fit","cover",3,"src"],["routerLinkActive","custom-active","class","list-group-item list-group-item-action py-3 lh-sm","aria-current","true",3,"routerLink"]],template:function(r,n){if(r&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),i(6,"Edit Listings"),e(),t(7,"a",6)(8,"button",7),a(9,"i",8),i(10,"Add Listing "),e()()(),t(11,"div",9),w(12,J,10,7,"a",36,L),e()()(),t(14,"div",10)(15,"form",11),g("ngSubmit",function(){return n.onSubmit()}),t(16,"h3"),i(17,"Edit Listing"),e(),t(18,"div",12)(19,"label",13),i(20,"Name"),e(),a(21,"input",14),e(),t(22,"div",12)(23,"label",15),i(24,"City"),e(),a(25,"input",16),e(),t(26,"div",12)(27,"label",17),i(28,"Photo Url"),e(),t(29,"input",18),g("change",function(){return n.updateImagePreview()}),e()(),t(30,"div",12),a(31,"img",19),e(),t(32,"div",12)(33,"label",20),i(34,"Price"),e(),a(35,"input",21),e(),t(36,"div",12)(37,"div",22),a(38,"input",23),t(39,"label",24),i(40,"Wifi"),e()(),t(41,"div",22),a(42,"input",25),t(43,"label",26),i(44,"Laundry"),e()()(),t(45,"div",27)(46,"button",28),i(47," Save "),e(),t(48,"button",29),g("click",function(){return n.deleteListing()}),i(49," Delete "),e()()()()()()),r&2){let o;l(7),c("routerLink",_(4,K)),l(5),S(n.listings),l(3),c("formGroup",n.editForm),l(16),c("src",(o=n.editForm.get("photo"))!=null&&o.value?(o=n.editForm.get("photo"))==null?null:o.value:"https://via.placeholder.com/300x200.png",v),l(15),c("disabled",!n.editForm.valid)}},dependencies:[F,M,A,I,z,D,R,G,O,V,j,q,U],styles:["a[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], button.btn-save[_ngcontent-%COMP%]{border:solid 1px #a01dc5;background-color:#a01dc5;color:#fff}a[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, button.btn-save[_ngcontent-%COMP%]:hover{background:#8e1bbf;color:#fff;cursor:pointer}.custom-active[_ngcontent-%COMP%]{background-color:#a01dc5;color:#fff}"]});let d=s;return d})();export{re as EditListingComponent};
